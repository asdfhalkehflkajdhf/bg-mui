<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8">
		<title>男生女生</title>
		<meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1,user-scalable=no">
<!-- 		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black">
 -->
		<link rel="stylesheet" href="../css/mui.min.css">

		<link rel="stylesheet" href="common/home.css">

	</head>

	<body>
		
	
		<div id="header"></div>
		<!--底部标题栏-->
		<div id="bottom"></div>
		
		<div class="mui-content">
			<div id="bottom-tab"></div>
		</div>
		
		<script src="../js/mui.min.js"></script>
		<script>
			mui.init({
				subpages:[{
				  url:'find-friend-list.html',
				  id:'find-friend-list.html',
				  styles:{
					top:'45px',//mui标题栏默认高度为45px；
					bottom:'50px'//默认为0px，可不定义；
				  }
				}]
			});
			
			
			mui("#header").load("common/header-back.html");
			mui("#bottom").load("common/bottom-bar.html");

			
			function openNewPage(targetTab,options){
					mui.openWindow(targetTab,targetTab,options);
			}
			

        	//跳转页面全局变量
        	var subpages = ['find-friend-list.html','action-list.html', 'msg.html', 'setting.html'];
        	var subpage_style = {
            	top: '44px',
            	bottom: '50px'
        	};
        	var aniShow = {};//动画显示
        	 //当前激活选项
            var activeTab=subpages[0];// = plus.webview.currentWebview().getURL();
        	function initSubPage(activePage){
        		var self = plus.webview.currentWebview();
                for (var i = 0; i < 4; i++) {
                    var temp = {}; 
                    //http://www.html5plus.org/doc/zh_cn/webview.html#plus.webview.create
                    var sub = plus.webview.create(subpages[i], subpages[i], subpage_style);
                    if (activePage != subpages[i]) {
                     sub.hide();
                    }else{
                        temp[subpages[i]] = "true";
                        mui.extend(aniShow,temp);//合并对象
                    }
                    self.append(sub);
                }
        	}
        	
			//http://dev.dcloud.net.cn/mui/window/#openwindow
			mui.plusReady(function(){
//				activeTab = plus.webview.currentWebview().id;
				initSubPage(activeTab);
				//底部显示状态改变
//				setBottomBarAction();
				console.log("当前页面URL："+plus.webview.currentWebview().getURL());
				console.log("当前页面ID："+plus.webview.currentWebview().id);
				
				//选项卡点击事件
//				mui('.mui-bar-tab').on('tap', 'a', function(e) {
//	   				var targetTab = this.getAttribute('href');
//	   				console.log("open "+targetTab);
//					//打开窗口的相关参数
//					var options = {
//						styles:{
//							popGesture: "close"
//						},
//						extras:{}
//					};
//					//打开新窗口
//	   				openNewPage(targetTab,options);
//				});
				
				//选项卡点击事件
	            mui('.mui-bar-tab').on('tap', 'a', function(e) {
	                
	                var targetTab = this.getAttribute('href');
	                console.log("bottom 当前："+activeTab);
	                console.log("bottom 目标："+targetTab);
	                if (targetTab == activeTab) {
	                    return;
	                }
	                //更换标题
	                var title = document.getElementById("title");
	                console.log(this.querySelector('.mui-tab-label').innerHTML);
//	                title.innerHTML = this.querySelector('.mui-tab-label').innerHTML;
	                //显示目标选项卡
	                console.log("目标page:"+targetTab);
	                //若为iOS平台或非首次显示，则直接显示
	                if(mui.os.ios||aniShow[targetTab]){
	                	console.log("显示ios"+targetTab);
	                    plus.webview.show(targetTab);
	                }else{
	                    //否则，使用fade-in动画，且保存变量
	                    var temp = {};
	                    temp[targetTab] = "true";
	                    mui.extend(aniShow,temp);
	                    plus.webview.show(targetTab,"fade-in",300);
	                    console.log("显示and"+targetTab);
	                }
	                //隐藏当前;
	              	plus.webview.hide(activeTab);
	                //更改当前活跃的选项卡
	                activeTab = targetTab;
	            });
			});


		</script>
		
	</body>

</html>